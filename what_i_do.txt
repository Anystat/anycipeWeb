# этот файл для меня, он нужен так как я только осваиваю джанго и мне лень пересматривать видосы

django-admin startproject
manage.py migrate
          createsuperuser
          startapp

settings.py => LANGUAGE_CODE = 'ru-RU' # русификация
               add in INSTALLED_APPS my app

models.py => add class Post # создает таблицу Post

class Recipe(models.Model):
    title = models.CharField('Название рецепта', max_length=150)
    text = models.TextField('Рецепт')
    create_date = models.DateTimeField('Дата создания', auto_now_add=True)

manage.py makemigrations
          migrate

admin.py => подключаю модель

from .models import Recipe
admin.site.register(Recipe)

models.py => add class Meta for Post # не всегда срабатывает как надо,
                                     # надо разобраться по версиям джанго
                                     # помогла замена __unicode__ на __str__, __repr__ не помог

    class Meta:
        verbose_name = 'Рецепт'
        verbose_name_plural = 'Рецепты'
        ordering = ['-create_date']
    def __str(self):
        return '{} {}'.format(self.title, self.create_date)

models.py => add in Recipe
    author = models.CharField('Автор', max_length=150, default='Admin')

manage.py makemigrations
          migrate

# hint откат бд
manage.py migrate nameapp 0001

urls.py => Django 1.10 no longer allows you to specify views as a string (e.g. 'myapp.views.home') in your URL patterns.
http://stackoverflow.com/questions/38744285/django-urls-error-view-must-be-a-callable-or-a-list-tuple-in-the-case-of-includ

from recipe.views import recipe_list
urlpatterns = [
    url(r'^$', recipe_list, name='recipe_list'),

views.py => add view function

from django.shortcuts import render_to_response
from .models import Recipe
def recipe_list(request):
    recipe_list = Recipe.objects.all().order_by('-create_date')
    return render_to_response('recipe/recipe_list.html', {'recipe_list': recipe_list, 'query': query})

create dir templates/recipe in app
add recipe_list.html

recipe_list.html => add template

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Рецепты</title>
</head>
<body>
    <h1>Все рецепты</h1>
    {% for recipe in recipe_list %}
        <h3>{{ recipe.title }}</h3>
        <p>{{ recipe.text }}</p>
        <p>{{ recipe.create_date }}&nbsp;{{ recipe.author }}</p>

    {% endfor %}
</body>
</html>

settings.py => add static dir
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, 'static')
]

create dir static/nameapp/css in project
create style.css

style.css => add style
h1{
    color: green;
}

recipe_list.html => add style
{% load static %}
<link rel="stylesheet" href="{% static "recipe/css/style.css" %}">

recipe_list.html => change text view # добавление обрезки длинного рецепта в выдаче
        <p>{{ recipe.text|truncatewords:30 }}</p>

add link for recipe
urls.py =>
    url(r'^recipe/(?P<id>\d+)/$', recipe_detail, name='recipe_detail'),

views.py =>
def recipe_detail(request, id):
    recipe = Recipe.objects.get(id=id)
    return render_to_response('recipe/recipe_detail.html', {'recipe_detail': recipe})

recipe_detail.html =>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <a href="/">На главную</a>
    <h1>{{ recipe_detail.title }}</h1>
    {{ recipe_detail.text|linebreaks }}
    <p>{{ recipe_detail.create_date }}&nbsp;{{ recipe_detail.author }}</p>
</body>
</html>

recipe_list =>
<a href="recipe/{{ recipe.id }}">Смотреть</a>

add base temlate in dit project_dir/templates

base.html =>
{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Рецепты</title>
    <link rel="stylesheet" href="{% static "recipe/css/style.css" %}">
</head>
<body>

    {% block content %}
    {% endblock content %}

</body>
</html>

add project_dir/templates in settings.py

settings.py => add
TEMPLATES = [
    {
        'DIRS': [os.path.join(BASE_DIR, 'templates')],

rm base html and add block content in templates
 {% extends 'base.html' %}
 {% block content %}
 # html
 {% endblock content %}

 add search
 recipe_list.html => add form
      <form action=".">
         <input type="text" name="query" value="{{ query|default:'' }}">
         <input type="submit" value="Поиск">
     </form>
vievs.py => add get
query = request.GET.get('query')
    if query:
        recipe_list = recipe_list.filter(text__icontains=query)

recipe_list.html =>
<input type="text" name="query" value="{{ query|default:'' }}">
views.py =>
return render_to_response('recipe/recipe_list.html', {'recipe_list': recipe_list, 'query': query})



Добавил модуль requests для отправки html и получения json
Поменял структуру urls
Добавил фэйковый запрос JSON и посмотрел как его парсить

Добавил взаимодействие с рестом
Получаю список всех рецептов
Получаю список всех ингридиентов
Осущестляю поиск с запятыми и пробелами по ингридиентам

in def =>
from django.template.context_processors import csrf
args.update(csrf(request))
    if request.method == 'POST':

in form=>
{% csrf_token %}

добавил поиск по чекбооксам


